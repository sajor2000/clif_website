---
import BaseLayout from '../layouts/BaseLayout.astro';
import Badge from '../components/Badge.astro';
import CTAButton from '../components/shared/CTAButton.astro';
---

<BaseLayout
  title="CLIF Data Dictionary"
  description="Access the Common Longitudinal ICU data Format (CLIF) data dictionary versions and documentation"
>
  <div class="container mx-auto px-6 py-12">
    <h1 class="text-4xl font-bold text-clif-burgundy mb-4">CLIF Data Dictionary</h1>
    <p class="text-xl text-gray-600 mb-8 max-w-3xl">
      Comprehensive documentation for implementing the Common Longitudinal ICU data Format.
    </p>

    <div class="flex flex-col lg:flex-row gap-8">
      <!-- Version Sidebar -->
      <aside class="lg:w-64 flex-shrink-0">
        <div class="lg:sticky lg:top-24">
          <!-- Versions -->
          <div class="mb-8">
            <h3 class="text-sm font-semibold text-gray-900 uppercase tracking-wider mb-4">Versions</h3>
            <nav class="space-y-1">
              <a
                href="/data-dictionary/data-dictionary-2.1.0"
                class="flex items-center justify-between p-3 rounded-lg bg-clif-burgundy/5 border-l-4 border-clif-burgundy text-clif-burgundy font-medium"
              >
                <span>v2.1.0</span>
                <Badge type="beta" size="small" />
              </a>
              <a
                href="/data-dictionary/data-dictionary-2.2.0"
                class="flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 text-gray-700 transition-colors"
              >
                <span>v2.2.0</span>
                <Badge type="concept" size="small" />
              </a>
              <a
                href="/data-dictionary/data-dictionary-2.0.0"
                class="flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 text-gray-700 transition-colors"
              >
                <span>v2.0.0</span>
                <Badge type="beta" size="small" />
              </a>
              <a
                href="/data-dictionary/data-dictionary-1.0.0"
                class="flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 text-gray-500 transition-colors"
              >
                <span>v1.0.0</span>
                <Badge type="deprecated" size="small" />
              </a>
                            <a
                href="/data-dictionary/change-log"
                class="flex items-center gap-2 p-3 rounded-lg hover:bg-gray-50 text-gray-700 transition-colors"
              >
                <span>Version Change Log</span>
              </a>
            </nav>
          </div>

          <!-- Quick Links -->
          <div>
            <h3 class="text-sm font-semibold text-gray-900 uppercase tracking-wider mb-4">Quick Links</h3>
            <nav class="space-y-1">
              <a
                href="https://chatgpt.com/g/g-h1nk6d3eR-clif-assistant"
                target="_blank"
                rel="noopener noreferrer"
                class="flex items-center gap-2 p-3 rounded-lg hover:bg-gray-50 text-gray-700 transition-colors"
              >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
                </svg>
                <span>CLIF Assistant</span>
              </a>
              <a
                href="/tools"
                class="flex items-center gap-2 p-3 rounded-lg hover:bg-gray-50 text-gray-700 transition-colors"
              >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                </svg>
                <span>CLIF Tools</span>
              </a>
              <a
                href="/mCIDE"
                class="flex items-center gap-2 p-3 rounded-lg hover:bg-gray-50 text-gray-700 transition-colors"
              >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                </svg>
                <span>About mCIDE</span>
              </a>
            </nav>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="flex-1 min-w-0">
        <!-- Current Version Highlight -->
        <section class="mb-8">
          <div class="glass-dark text-white p-6 rounded-2xl shadow-xl glow">
            <div class="flex items-center gap-3 mb-3">
              <h2 class="text-2xl font-bold">CLIF 2.1.0</h2>
              <Badge type="beta" />
            </div>
            <p class="text-white/90 mb-4">
              The latest release featuring standardized tables for critical care data across multiple institutions.
            </p>
            <div class="flex flex-wrap gap-3">
              <CTAButton
                href="/data-dictionary/data-dictionary-2.1.0"
                ariaLabel="View CLIF 2.1.0 Data Dictionary"
              >
                View Documentation
              </CTAButton>
              <CTAButton
                href="https://github.com/Common-Longitudinal-ICU-data-Format/CLIF/tree/main/mCIDE"
                variant="secondary"
                external={true}
                ariaLabel="View mCIDE on GitHub"
              >
                mCIDE on GitHub
              </CTAButton>
              <CTAButton
                href="/data-dictionary/change-log"
                variant="secondary"
                ariaLabel="View Change Log"
              >
                Change Log
              </CTAButton>
            </div>
          </div>
        </section>

        <!-- CLIF Maturity Section -->
        <section class="mb-8">
          <div class="bg-white border border-gray-200 rounded-xl p-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">CLIF Maturity Levels</h2>
            <p class="text-gray-600 text-sm mb-6">
              CLIF is under active development. The consortium tracks maturity for both the overall format and individual tables.
            </p>

            <!-- Two Column Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
              <!-- Overall Format Maturity -->
              <div>
                <h3 class="text-sm font-semibold text-gray-800 mb-4 uppercase tracking-wide">Overall Format Maturity</h3>
                <table class="w-full text-sm">
                  <tbody class="divide-y divide-gray-100">
                    <tr>
                      <td class="py-2 pr-3 align-top w-28">
                        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold bg-red-100 text-red-800 border border-red-300 uppercase">Experimental</span>
                      </td>
                      <td class="py-2 text-gray-600 align-top">Majority of critical illness and hospital course not represented in Entity-Relationship (ER) model, expect frequent breaking changes.</td>
                    </tr>
                    <tr>
                      <td class="py-2 pr-3 align-top">
                        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold bg-orange-100 text-orange-800 border border-orange-300 uppercase">Beta</span>
                      </td>
                      <td class="py-2 text-gray-600 align-top">Core ER model complete and breaking changes to the existing structure unlikely. Actively seeking feedback about new tables to add to the ER model to fully capture critical illness.</td>
                    </tr>
                    <tr>
                      <td class="py-2 pr-3 align-top">
                        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold bg-green-100 text-green-800 border border-green-300 uppercase">Stable</span>
                      </td>
                      <td class="py-2 text-gray-600 align-top">Tested and recommended for general use. EHR data not currently represented in CLIF outside the scope of the format.</td>
                    </tr>
                    <tr>
                      <td class="py-2 pr-3 align-top">
                        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold bg-blue-100 text-blue-800 border border-blue-300 uppercase">Mature</span>
                      </td>
                      <td class="py-2 text-gray-600 align-top">Widely adopted across majority of consortium sites with majority of tables in stable or mature. ER model very stable.</td>
                    </tr>
                    <tr>
                      <td class="py-2 pr-3 align-top">
                        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold bg-gray-200 text-gray-700 border border-gray-400 uppercase">Deprecated</span>
                      </td>
                      <td class="py-2 text-gray-600 align-top">No longer maintained.</td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <!-- Table Maturity -->
              <div>
                <h3 class="text-sm font-semibold text-gray-800 mb-4 uppercase tracking-wide">Table Maturity</h3>
                <table class="w-full text-sm">
                  <tbody class="divide-y divide-gray-100">
                    <tr>
                      <td class="py-2 pr-3 align-top w-28">
                        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold bg-purple-100 text-purple-800 border border-purple-300 uppercase">Concept</span>
                      </td>
                      <td class="py-2 text-gray-600 align-top">A planned future CLIF table that has yet to be used in a federated project. The table structure and CDE elements are in draft form. Permissible values of category variables may still need to be defined. Seeking conceptual feedback. Significant changes to all aspects of the table are possible.</td>
                    </tr>
                    <tr>
                      <td class="py-2 pr-3 align-top">
                        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold bg-orange-100 text-orange-800 border border-orange-300 uppercase">Beta</span>
                      </td>
                      <td class="py-2 text-gray-600 align-top">Table purpose, structure, and field names complete and used in at least one federated CLIF project. CDE for category variables defined. Actively testing the table's practical use in projects.</td>
                    </tr>
                    <tr>
                      <td class="py-2 pr-3 align-top">
                        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold bg-green-100 text-green-800 border border-green-300 uppercase">Stable</span>
                      </td>
                      <td class="py-2 text-gray-600 align-top">Tested and recommended for general use. CDE stable with permissible values for all category variables precisely defined and locked. Fully implemented at multiple consortium sites and used in a peer-reviewed publication.</td>
                    </tr>
                    <tr>
                      <td class="py-2 pr-3 align-top">
                        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold bg-blue-100 text-blue-800 border border-blue-300 uppercase">Mature</span>
                      </td>
                      <td class="py-2 text-gray-600 align-top">Adopted across a majority of the CLIF consortium sites and very stable.</td>
                    </tr>
                    <tr>
                      <td class="py-2 pr-3 align-top">
                        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold bg-gray-200 text-gray-700 border border-gray-400 uppercase">Deprecated</span>
                      </td>
                      <td class="py-2 text-gray-600 align-top">No longer maintained.</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </section>

        <!-- Help Section -->
        <section class="bg-gradient-to-r from-clif-burgundy to-clif-burgundy-dark text-white p-6 rounded-xl">
          <h2 class="text-xl font-bold mb-2">Need Implementation Support?</h2>
          <div class="flex flex-wrap gap-3">
            <CTAButton
              href="mailto:clif_consortium@uchicago.edu"
              variant="secondary"
              size="small"
              ariaLabel="Contact CLIF Consortium support"
            >
              Contact Support
            </CTAButton>
          </div>
        </section>
      </main>
    </div>
  </div>
</BaseLayout>

