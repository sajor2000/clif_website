---
import BaseLayout from '../layouts/BaseLayout.astro';
import FeatureCard from '../components/shared/FeatureCard.astro';
import CTAButton from '../components/shared/CTAButton.astro';
---

<BaseLayout
  title="mCIDE - Minimum Common ICU Data Elements"
  description="The minimum Common ICU Data Elements (mCIDE) define essential standardized variables for critical care research, ensuring scientific integrity and reproducibility across CLIF implementations."
>
  <div class="container mx-auto px-4 py-8 max-w-6xl">
    <!-- Hero Section -->
    <div class="text-center mb-12">
      <h1 class="text-5xl font-bold text-clif-burgundy mb-4">
        mCIDE
        <span class="block text-2xl font-normal text-gray-600 mt-2">
          Minimum Common ICU Data Elements
        </span>
      </h1>
      <p class="text-xl text-gray-600 max-w-3xl mx-auto">
        The cornerstone of scientific integrity in critical care data science - standardized
        variables that enable reproducible, multi-center research
      </p>
    </div>

    <!-- Introduction -->
    <section class="mb-16">
      <div
        class="bg-gradient-to-r from-clif-burgundy to-clif-burgundy-dark text-white p-8 rounded-2xl shadow-xl"
      >
        <h2 class="text-3xl font-bold mb-4">What is mCIDE?</h2>
        <p class="text-lg leading-relaxed mb-4">
          The minimum Common ICU Data Elements (mCIDE) represent a carefully curated set of
          standardized variables identified by the CLIF consortium as essential for studying
          critical illness. These elements form the foundation of the CLIF data model, ensuring that
          data collected across different institutions can be meaningfully compared and analyzed
          together.
        </p>
        <p class="text-lg leading-relaxed">
          By defining common vocabularies, units of measurement, and permissible values for key
          clinical variables, mCIDE enables true federated analytics while maintaining the highest
          standards of scientific rigor.
        </p>
      </div>
    </section>

    <!-- Why mCIDE Matters -->
    <section class="mb-16">
      <h2 class="text-3xl font-bold mb-8 text-center">Why mCIDE is Essential</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <FeatureCard
          title="Scientific Integrity"
          description="Ensures reproducible research by standardizing how critical variables are defined and measured across all participating sites."
          variant="bordered"
          class="border-t-4 border-green-500"
          icon='<svg class="w-8 h-8 text-green-600" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"/></svg>'
        />

        <FeatureCard
          title="Data Harmonization"
          description="Bridges differences in EHR systems and local practices by mapping diverse source data to common standardized categories."
          variant="bordered"
          class="border-t-4 border-blue-500"
          icon='<svg class="w-8 h-8 text-blue-600" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true"><path d="M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"/><path d="M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"/><path d="M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"/></svg>'
        />

        <FeatureCard
          title="Federated Analytics"
          description="Enables meaningful multi-center analyses by ensuring that the same clinical concepts are represented consistently."
          variant="bordered"
          class="border-t-4 border-purple-500"
          icon='<svg class="w-8 h-8 text-purple-600" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true"><path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"/></svg>'
        />

        <FeatureCard
          title="Quality Benchmarking"
          description="Allows institutions to compare their outcomes and practices against peers using standardized metrics."
          variant="bordered"
          class="border-t-4 border-orange-500"
          icon='<svg class="w-8 h-8 text-orange-600" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true"><path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/></svg>'
        />

        <FeatureCard
          title="Reduced Complexity"
          description="Simplifies ETL development by providing clear mappings and standardized vocabularies for common ICU variables."
          variant="bordered"
          class="border-t-4 border-pink-500"
          icon='<svg class="w-8 h-8 text-pink-600" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true"><path fill-rule="evenodd" d="M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z"/></svg>'
        />

        <FeatureCard
          title="Accelerated Research"
          description="Speeds time from hypothesis to insight by eliminating data wrangling and standardization bottlenecks."
          variant="bordered"
          class="border-t-4 border-indigo-500"
          icon='<svg class="w-8 h-8 text-indigo-600" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true"><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z"/></svg>'
        />
      </div>
    </section>

    <!-- Key mCIDE Categories -->
    <section class="mb-16">
      <h2 class="text-3xl font-bold mb-8">Key mCIDE Categories</h2>

      <div class="space-y-6">
        <!-- Laboratory Values -->
        <div class="bg-white rounded-xl shadow-lg p-8">
          <h3 class="text-2xl font-semibold mb-4 text-clif-burgundy">Laboratory Values</h3>
          <p class="mb-4">
            Standardized lab categories ensure consistent interpretation of critical biomarkers
            across institutions.
          </p>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
            <div class="bg-gray-50 p-3 rounded">
              <p class="font-semibold">Chemistry</p>
              <p class="text-gray-600">Sodium, Potassium, Creatinine, BUN</p>
            </div>
            <div class="bg-gray-50 p-3 rounded">
              <p class="font-semibold">Hematology</p>
              <p class="text-gray-600">WBC, Hemoglobin, Platelets</p>
            </div>
            <div class="bg-gray-50 p-3 rounded">
              <p class="font-semibold">Blood Gas</p>
              <p class="text-gray-600">pH, PaO2, PaCO2, Lactate</p>
            </div>
            <div class="bg-gray-50 p-3 rounded">
              <p class="font-semibold">Infection</p>
              <p class="text-gray-600">Procalcitonin, CRP</p>
            </div>
          </div>
          <p class="mt-4 text-sm text-gray-600">
            <a
              href="https://github.com/clif-consortium/CLIF/blob/main/mCIDE/clif_lab_categories.csv"
              class="text-clif-burgundy hover:underline"
              target="_blank"
              rel="noopener noreferrer"
            >
              View complete lab categories on GitHub â†’
            </a>
          </p>
        </div>

        <!-- ADT Locations -->
        <div class="bg-white rounded-xl shadow-lg p-8">
          <h3 class="text-2xl font-semibold mb-4 text-clif-burgundy">ADT Location Categories</h3>
          <p class="mb-4">
            Harmonized location categories enable tracking of patient flow and resource utilization
            patterns.
          </p>
          <div class="flex flex-wrap gap-2">
            <span class="bg-clif-burgundy text-white px-3 py-1 rounded-full text-sm">ICU</span>
            <span class="bg-clif-burgundy text-white px-3 py-1 rounded-full text-sm">Ward</span>
            <span class="bg-clif-burgundy text-white px-3 py-1 rounded-full text-sm">Stepdown</span>
            <span class="bg-clif-burgundy text-white px-3 py-1 rounded-full text-sm">ED</span>
            <span class="bg-clif-burgundy text-white px-3 py-1 rounded-full text-sm"
              >Procedural</span
            >
            <span class="bg-clif-burgundy text-white px-3 py-1 rounded-full text-sm">Dialysis</span>
            <span class="bg-clif-burgundy text-white px-3 py-1 rounded-full text-sm">Radiology</span
            >
          </div>
        </div>

        <!-- Respiratory Support -->
        <div class="bg-white rounded-xl shadow-lg p-8">
          <h3 class="text-2xl font-semibold mb-4 text-clif-burgundy">
            Respiratory Support Devices
          </h3>
          <p class="mb-4">
            Standardized device categories critical for ARDS research and ventilator management
            studies.
          </p>
          <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
            <div class="border-l-4 border-green-500 pl-3">
              <p class="font-semibold">Invasive</p>
              <p class="text-sm text-gray-600">IMV, Trach Collar</p>
            </div>
            <div class="border-l-4 border-blue-500 pl-3">
              <p class="font-semibold">Non-invasive</p>
              <p class="text-sm text-gray-600">NIPPV, CPAP</p>
            </div>
            <div class="border-l-4 border-yellow-500 pl-3">
              <p class="font-semibold">Supplemental O2</p>
              <p class="text-sm text-gray-600">High Flow NC, Face Mask, Nasal Cannula</p>
            </div>
          </div>
        </div>

        <!-- Discharge Disposition -->
        <div class="bg-white rounded-xl shadow-lg p-8">
          <h3 class="text-2xl font-semibold mb-4 text-clif-burgundy">Discharge Categories</h3>
          <p class="mb-4">
            Harmonized discharge dispositions enable outcome comparisons and post-ICU trajectory
            analyses.
          </p>
          <div class="text-sm space-y-2">
            <div class="flex flex-wrap gap-2">
              <span class="bg-green-100 text-green-800 px-2 py-1 rounded">Home</span>
              <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded">SNF</span>
              <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded">LTACH</span>
              <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded">Acute Rehab</span>
              <span class="bg-red-100 text-red-800 px-2 py-1 rounded">Expired</span>
              <span class="bg-gray-100 text-gray-800 px-2 py-1 rounded">Hospice</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Implementation Guide -->
    <section class="mb-16">
      <h2 class="text-3xl font-bold mb-8">Implementing mCIDE</h2>

      <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-8">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div>
            <h3 class="text-xl font-semibold mb-4">For Data Engineers</h3>
            <ul class="space-y-3">
              <li class="flex items-start">
                <svg
                  class="w-5 h-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                  ></path>
                </svg>
                <span>Map local values to mCIDE categories using provided CSV files</span>
              </li>
              <li class="flex items-start">
                <svg
                  class="w-5 h-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                  ></path>
                </svg>
                <span>Preserve original values in _name fields</span>
              </li>
              <li class="flex items-start">
                <svg
                  class="w-5 h-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                  ></path>
                </svg>
                <span>Use CLIF Lighthouse to validate mappings</span>
              </li>
            </ul>
          </div>

          <div>
            <h3 class="text-xl font-semibold mb-4">For Researchers</h3>
            <ul class="space-y-3">
              <li class="flex items-start">
                <svg
                  class="w-5 h-5 text-blue-500 mt-0.5 mr-2 flex-shrink-0"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                  ></path>
                </svg>
                <span>Query using _category fields for standardized analyses</span>
              </li>
              <li class="flex items-start">
                <svg
                  class="w-5 h-5 text-blue-500 mt-0.5 mr-2 flex-shrink-0"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                  ></path>
                </svg>
                <span>Reference mCIDE documentation in methods sections</span>
              </li>
              <li class="flex items-start">
                <svg
                  class="w-5 h-5 text-blue-500 mt-0.5 mr-2 flex-shrink-0"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                  ></path>
                </svg>
                <span>Contribute new categories through GitHub PRs</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Resources -->
    <section class="mb-16">
      <h2 class="text-3xl font-bold mb-8 text-center">mCIDE Resources</h2>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <FeatureCard
          title="GitHub Repository"
          description="Access the complete mCIDE specifications, category mappings, and contribute to ongoing development."
          href="https://github.com/clif-consortium/CLIF/tree/main/mCIDE"
          external={true}
          ariaLabel="Visit mCIDE GitHub repository (opens in new tab)"
          class="hover:border-clif-burgundy"
        />

        <FeatureCard
          title="Implementation Guide"
          description="Step-by-step instructions for mapping your institution's data to mCIDE categories."
          href="/data-dictionary"
          ariaLabel="View CLIF Data Dictionary with mCIDE implementation details"
          class="hover:border-clif-burgundy"
        />

        <FeatureCard
          title="Validation Tools"
          description="Use CLIF Lighthouse to validate your mCIDE mappings and ensure compliance."
          href="/tools#clif-lighthouse"
          ariaLabel="Learn about CLIF Lighthouse validation tool"
          class="hover:border-clif-burgundy"
        />
      </div>
    </section>

    <!-- Call to Action -->
    <div
      class="bg-gradient-to-r from-clif-burgundy to-clif-burgundy-dark text-white p-8 rounded-2xl text-center"
    >
      <h3 class="text-2xl font-bold mb-4">Ready to Implement mCIDE?</h3>
      <p class="text-lg mb-6 max-w-2xl mx-auto">
        Join the growing community of institutions committed to reproducible critical care research
      </p>
      <nav aria-label="mCIDE action links" class="flex flex-wrap justify-center gap-4">
        <CTAButton
          href="https://github.com/clif-consortium/CLIF/tree/main/mCIDE"
          variant="outline"
          class="bg-white text-clif-burgundy hover:bg-gray-100 border-white"
          external={true}
          ariaLabel="Access mCIDE specifications on GitHub (opens in new tab)"
        >
          Access mCIDE Specs
        </CTAButton>
        <CTAButton
          href="/team"
          variant="outline"
          class="bg-transparent text-white hover:bg-white hover:text-clif-burgundy border-white"
          ariaLabel="Contact the CLIF team for mCIDE support"
        >
          Get Support
        </CTAButton>
      </nav>
    </div>
  </div>
</BaseLayout>
